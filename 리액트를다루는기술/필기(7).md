# 5. ref: DOM에 이름 달기

ref: 리액트 프로젝트 내부에서 DOM의 이름을 다는 방법

\*리액트에선 DOM에 id를 사용하는 것을 권장하지 않는다.

ref는 DOM을 직접적으로 건드려야 할 때 사용한다.

- DOM을 꼭 사용해야 하는 상황

  1. 특정 input에 포커스 주기
  2. 스크롤 박스 조작하기
  3. Canvas 요소에 그림 그리기 등

### 5.2.1 콜백 함수를 통한 ref 사용

1. ref를 만드는 가장 기본적인 방법은 콜백 함수를 사용하는 것이다.
2. 콜백 함수는 ref 값을 파라미터로 전달받는다.
3. 함수 내부에서 파라미터로 받은 ref를 컴포넌트의 멤버 변수로 설정해준다.

### 5.2.2 createRef를 통한 ref 설정

리액트에 내장되어 있는 createRef 함수를 사용하는 방법이 있다.

## 5.3 컴포넌트에 ref 달기

사용방법
ex) <MyComponent ref={(ref)=>{this.myComponent=ref}}
컴포넌트에 ref를 달면 컴포넌트 내부의 메서드 및 멤버 변수에도 접근할 수 있따.

## 5.4 정리

컴포넌트 내부에서 DOM에 직접 접근해야 할 때 ref를 사용한다.

#### 서로 다른 컴포넌트끼리 데이터를 교류할 때 ref를 사용하는것은 잘못된 사용방법이다.

=> 앱 규모가 커지면 구조가 꼬여서 유지 보수가 불가능해짐
=> 리덕스 혹은 Context API를 사용하여 교류

# 6. 컴포넌트 반복

## 6.1 자바스크립트 배열 map() 함수

arr.map(callback, [thisArg])
=> 파라미터

- callback: 새로운 배열의 요소를 생성하는 함수
  - currentValue: 현재 처리하고 있는 요소
  - index: 현재 처리하는 요소의 index
  - array: 현재 처리하는 원본 배열
- thisArg(선택 항목): callback 함수 내부에서 사용할 this 레퍼런스

## 6.3 key

리액트에서 key는 컴포넌트 배열을 렌더링했을 때 어떤 원소에 변동이 있었는지 알아내려고 사용한다.
key 값을 설정할 때는 언제나 유일해야 하므로 데이터가 가진 고윳값을 key값으로 설정한다.
고윳값이 없을 때는 map 함수에 전달되는 콜백 함수의 인수인 index 값을 사용한다.

- index를 key로 사용하면 배열이 변경될 때 효율적으로 리렌더링 되지 않기 때문에 권장하지 않음
  => useState로 초기값을 설정하여 고유한 id 값을 넣어주면 됨

## 6.5 정리

배열을 렌더링할 때는 key 값 설정에 항상 주의하며 언제나 유일해야 한다.
상태 안에 있는 배열을 변경할 때는 직접 접근하여 수정하는 것이 아닌 concat, filter 등의 배열 내장 함수를 사용하여 새로운 배열을 만든 후 이를 새로운 상태로 설정해 주어야 함!
